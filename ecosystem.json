{
  "apps": [
    {
      "name": "epicure",
      "script": "./server.ts",
      "env": {
        "NODE_ENV": "staging"
      }
    }
  ],

  "deploy": {
    "staging": {
      "key": "~/.ssh/epicure-key.pem",
      "user": "ubuntu",
      "host": ["ec2-3-70-214-2.eu-central-1.compute.amazonaws.com"],
      "ref": "origin/master",
      "repo": "git@github.com:AlexBarano/EpicureBackend.git",
      "path": "/home/ubuntu/epicure/api",
      "ssh_options": "StrictHostKeyChecking=no",
      "post-deploy": "mkdir -p logs && nvm use 16.15.0 && npm i && pm2 reload ecosystem.json --env staging",
      "pre-deploy-local": "echo 'Deploying code to servers'",
      "env": {
        "NODE_ENV": "staging"
      }
    }
  }
}
